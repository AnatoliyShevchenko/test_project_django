# CustomAuth
### Функционал:
1) Авторизация по номеру телефона. Первый запрос на ввод номера телефона. Имитация отправки 4-х значного кода авторизации(задержка на сервере 1-2 сек). Второй запрос на ввод кода подтверждения.
2) Запись пользователя в БД если он ранее не авторизовывался.
3) Пользователю при первой авторизации присваивается рандомно сгенерированный 6-значный инвайт-код(цифры и символы).
### Доступ:
- Все пользователи.
### Путь: "http://some_host/api/v1/auths/"
### Методы: 
1) **POST**
    - **Описание:** Авторизация по номеру телефона. Имитация отправки кода авторизации. Код записывается в Redis со временем жизни 2 минуты. Это своего рода временной лимит для авторизации, пока ключ находится в Redis клиент может ввести код авторизации и получить токены.
    - **Пример запроса:**
        ```json
        {
            "phone_number":"+77777777766"
        }```
    - **Успешный ответ:**
        - **Код состояния:** 200 OK
        - **Тело ответа:** 
            ```json
            {
                "response": "We will sent code to you in sms.(use 3613), you have 2 minutes to confirm your number!"
            }```

2) **GET**
    - **Описание:** Просто заглушка.
    - **Ответ сервера**
        - **Код состояния:** 200 OK
        - **Тело ответа:** 
            ```json
            {
                "response":"use POST and PATCH methods"
            }```

3) **PATCH**
    - **Описание:** Запрос на ввод кода подтверждения. При успешной авторизации пользователь будет добавлен в базу данных если не был там ранее. Здесь пользователю присваивается индивидуальный инвайт-код.
    - **Пример запроса:**
        ```json
        {
            "otp":"3613"
        }```
    - **Успешный ответ:**
        - **Код состояния:** 200 OK
        - **Тело ответа:** 
            ```json
            {
                "access_token":"access token",
                "refresh_token":"refresh token"
            }```
    - **Ответ с ошибкой:**
        - **Код состояния:** 400 BAD_REQUEST
        - **Тело ответа:** 
            ```json
            {
                "response": "Пользователь не найден, возможно вы ждали дольше 2 минут. Вернитесь на предыдущий шаг."
            }```

___
# PersonalArea
### Функционал:
1) Запрос на профиль пользователя.
2) В профиле у пользователя должна быть возможность ввести чужой инвайт-код(при вводе проверять на существование). В своем профиле можно активировать только 1 инвайт код, если пользователь уже когда-то активировал инвайт код, то нужно выводить его в соответсвующем поле в запросе на профиль пользователя.
3) В API профиля должен выводиться список пользователей(номеров телефона), которые ввели инвайт код текущего пользователя.
### Доступ:
- Авторизованные пользователи.
### Путь: "http://some_host/api/v1/personal-area/"
### Методы:
1) **GET**
    - **Описание:** Запрос на профиль пользователя, в профиле выводится список пользователей(номеров телефона), которые ввели инвайт код текущего пользователя.
    - **Успешный ответ:**
        ```json
        {
            "phone_number": "+77777777766",
            "invite_code": "l87zwp",
            "invited_by": null,
            "followers": []
        }```

2) **PATCH**
    - **Описание:** Запрос на ввод чужого инвайт-кода, с проверкой на существование. Можно активировать только 1 раз.
    - **Пример запроса:**
        ```json
        {
            "invited_by":"HdGzEG"
        }```
    - **Успешный ответ:**
        - **Код состояния:** 200 OK
        - **Тело ответа:** 
            ```json
            {
                "response":"Inviter added!"
            }```
    - **Ответы с ошибкой:**
        - **Код состояния:** 400 BAD REQUEST
        - **Тело ответа:** 
            - ```json
                {
                    "response":"ERROR: you already have inviter!"
                }```
            - ```json
                {
                    "response":"ERROR: the client with code: 2461 not found."
                }


____
- [Вернуться в базовый файл](/README.md)
